eval(decodeURIComponent(escape(atob("CiAgY29uc3QgaW5qZWN0VUkgPSAoKSA9PiB7CmNvbnN0IGdldEZCRGF0YSA9ICgpID0+IHsKICAgIC8vIDEuIEFtYmlsIFVJRCAmIE5hbWEgQXdhbAogICAgY29uc3QgdWlkID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9jX3VzZXI9KFxkKykvKT8uWzFdOwogICAgbGV0IG5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gxJyk7CiAgICBsZXQgbmFtZSA9IG5hbWVFbCA/IG5hbWVFbC5pbm5lclRleHQgOiAiRmFjZWJvb2sgVXNlciI7CgogICAgLy8gMi4gS29yZWtzaSBqaWthIE5hbWEgdGVydGFuZ2thcCBzZWJhZ2FpICJCZXJhbmRhIgogICAgY29uc3QgbG93TmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKICAgIGlmIChsb3dOYW1lID09PSAiYmVyYW5kYSIgfHwgbG93TmFtZSA9PT0gImhvbWUiIHx8IGxvd05hbWUgPT09ICJmYWNlYm9vayIpIHsKICAgICAgICBjb25zdCBhbHROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9Im5hdmlnYXRpb24iXSBzcGFuLCBhW2hyZWYqPSIvcHJvZmlsZS5waHAiXSBzcGFuLCBzcGFuW3N0eWxlKj0iLXdlYmtpdC1saW5lLWNsYW1wIl0nKTsKICAgICAgICBpZiAoYWx0TmFtZSkgbmFtZSA9IGFsdE5hbWUuaW5uZXJUZXh0OwogICAgfQoKICAgIC8vIDMuIExvZ2lrYSBGb3RvIFByb2ZpbCAoUHJpb3JpdGFzIEdyYXBoIEFQSSkKICAgIGxldCBwaG90byA9IHVpZCAKICAgICAgICA/IGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8ke3VpZH0vcGljdHVyZT90eXBlPWxhcmdlJndpZHRoPTUwMCZoZWlnaHQ9NTAwYAogICAgICAgIDogJyc7CgogICAgLy8gNC4gRmFsbGJhY2sgamlrYSBVSUQgdGlkYWsgYWRhIGF0YXUgZm90byBrb3NvbmcKICAgIGlmICghcGhvdG8pIHsKICAgICAgICBjb25zdCBmYWxsYmFja0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1thcmlhLWxhYmVsPSJQcm9maWwiXSBpbWFnZSwgaW1nW3NyYyo9InNjb250ZW50Il0nKTsKICAgICAgICBwaG90byA9IGZhbGxiYWNrSW1nID8gKGZhbGxiYWNrSW1nLnNyYyB8fCBmYWxsYmFja0ltZy5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKSkgOiAnaHR0cHM6Ly9pLnBvc3RpbWcuY2MvckYwREtaY2gvY2FudmEtdXNlci1wcm9maWxlLWljb24tdmVjdG9yLWF2YXRhci1vci1wZXJzb24taWNvbi1wcm9maWxlLXBpY3R1cmUtcG9ydHJhaXQtc3ltYm9sLU1BR0RrLU1nLUpseTAucG5nJzsKICAgIH0KCiAgICAvLyA1LiBVcGdyYWRlIFJlc29sdXNpIGppa2EgZGFyaSBDRE4gRmFjZWJvb2sKICAgIGlmIChwaG90by5pbmNsdWRlcygnZmJjZG4ubmV0JykpIHsKICAgICAgICBwaG90byA9IHBob3RvLnJlcGxhY2UoL3BcZCt4XGQrLywgJ3A1MDB4NTAwJykucmVwbGFjZSgvc1xkK3hcZCsvLCAnczUwMHg1MDAnKTsKICAgIH0KCiAgICByZXR1cm4geyBwaG90bywgbmFtZSB9Owp9OwogICAgY29uc3QgZmJEYXRhID0gZ2V0RkJEYXRhKCk7CgogICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUudGV4dENvbnRlbnQgPSBgCiAgICAgICAgLmhlYWRlci1jb250YWluZXIgeyBtYXJnaW4tYm90dG9tOiA1dnc7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZy10b3A6IDJ2dzsgfQogICAgICAgIC5tYWluLXRpdGxlIHsgZm9udC1zaXplOiA2dnc7IGZvbnQtd2VpZ2h0OiA5MDA7IGNvbG9yOiByZ2IoNTMsNTMsNTMpOyBtYXJnaW46IDA7IGxldHRlci1zcGFjaW5nOiAtMXB4OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgfQogICAgICAgIC5ibHVlLXRleHQgeyBjb2xvcjogIzA4NjZGRjsgfQogICAgICAgIC50aXRsZS1saW5lIHsgd2lkdGg6IDEydnc7IGhlaWdodDogMS4ydnc7IGJhY2tncm91bmQ6ICMwODY2RkY7IG1hcmdpbjogMXZ3IGF1dG8gMDsgYm9yZGVyLXJhZGl1czogMXZ3OyB9CiAgICAgICAgLnRhcCB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgb3ZlcmZsb3c6IGhpZGRlbjsgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4xNXMgZWFzZTsgb3V0bGluZTogbm9uZTsgdXNlci1zZWxlY3Q6IG5vbmU7IGN1cnNvcjogcG9pbnRlcjsgfQogICAgICAgIC50YXA6YWN0aXZlIHsgdHJhbnNmb3JtOiBzY2FsZSguOTUpOyB9CiAgICAgICAgLnNlY3Rpb24tYm94IHsgYmFja2dyb3VuZDogcmdiKDIzMiwyMzIsMjMyKTsgcGFkZGluZzogNHZ3OyBib3JkZXItcmFkaXVzOiAydnc7IG1hcmdpbi1ib3R0b206IDJ2dzsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5zZWN0aW9uLXRpdGxlIHsgZm9udC1zaXplOiAydnc7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogcmdiKDMzLDMwLDMwKTsgbWFyZ2luLWJvdHRvbTogMy41dnc7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgfQogICAgICAgIC5hY2Nlc3MtbGFiZWwgeyBmb250LXNpemU6IDJ2dzsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNTMwMDBmOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbToxdnc7fQogICAgICAgIC5hY2Nlc3MtYXJlYSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwdnc7IGZvbnQtc2l6ZTogMXZ3OyBib3JkZXItcmFkaXVzOiAydnc7IHBhZGRpbmc6IDJ2dzsgYm94LXNpemluZzogYm9yZGVyLWJveDsgYmFja2dyb3VuZDogIzExMTsgb3ZlcmZsb3cteTogc2Nyb2xsOyBmb250LWZhbWlseTogbW9ub3NwYWNlOyByZXNpemU6IG5vbmU7IG1hcmdpbi1ib3R0b206IDF2dzsgY29sb3I6IzBiZmEzMTsgYm9yZGVyOm5vbmU7fQogICAgICAgIEBrZXlmcmFtZXMgZHJhd0NoZWNrIHsgdG8geyBzdHJva2UtZGFzaG9mZnNldDogMDsgfSB9CiAgICAgICAgLnNoaWVsZC1iYWRnZSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAtMTJweDsgbGVmdDogMjV2dzsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMjAlKTsgd2lkdGg6IDEwdnc7IGhlaWdodDogMTB2dzsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDUwJTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGJvcmRlcjoydncgc29saWQgIzA4NjZGRjsgcmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OiAwOyB9CiAgICAgICAgLmNoZWNrLWNvbnRhaW5lciB7IAogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7IAogICAgICAgICAgICBib3R0b206IC0xMHB4OyAKICAgICAgICAgICAgYm9yZGVyOjJ2dyBzb2xpZCAjMDg2NkZGOwogICAgICAgICAgICBsZWZ0OiAyNXZ3OyAKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMjAlKTsgCiAgICAgICAgICAgIHdpZHRoOiAxMHZ3OyAKICAgICAgICAgICAgaGVpZ2h0OiAxMHZ3OyAKICAgICAgICAgICAgYmFja2dyb3VuZDogIzEwZTAyZDsgCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IAogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IAogICAgICAgICAgICB6LWluZGV4OiAxMDsgCiAgICAgICAgfQogICAgICAgIC5jaGVjay1zdmcgeyAKICAgICAgICAgICAgd2lkdGg6IDYwJTsgCiAgICAgICAgICAgIGhlaWdodDogNjAlOyAKICAgICAgICAgICAgc3Ryb2tlOiB3aGl0ZTsgCiAgICAgICAgICAgIHN0cm9rZS13aWR0aDogNjsgCiAgICAgICAgICAgIGZpbGw6IG5vbmU7IAogICAgICAgICAgICBzdHJva2UtZGFzaGFycmF5OiA1MDsgCiAgICAgICAgICAgIHN0cm9rZS1kYXNob2Zmc2V0OiA1MDsgCiAgICAgICAgfQogICAgICAgIC5hbmltYXRlLWNoZWNrIHsgCiAgICAgICAgICAgIGFuaW1hdGlvbjogZHJhd0NoZWNrIDAuNXMgZWFzZS1pbi1vdXQgZm9yd2FyZHM7IAogICAgICAgIH0KICAgIGA7CgogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgogICAgY29uc3QgZmxvYXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGZsb2F0QnRuLmlubmVySFRNTCA9ICfwn5uh77iPJzsKICAgIGZsb2F0QnRuLmNsYXNzTmFtZSA9ICd0YXAnOwogICAgZmxvYXRCdG4uc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IGJvdHRvbTogMTB2dzsgcmlnaHQ6IDd2dzsgei1pbmRleDogMjE0NzQ4MzY0Nzsgd2lkdGg6IDEydnc7IGhlaWdodDogMTJ2dzsgYmFja2dyb3VuZDogIzA4NjZGRjsgYm9yZGVyLXJhZGl1czogNTAlOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDd2dzsgYm94LXNoYWRvdzogMCAzcHggOHB4IHJnYmEoMCwwLDAsMC40KTsgYm9yZGVyOiAwLjR2dyBzb2xpZCB3aGl0ZTtgOwoKICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtb2RhbC5pZCA9ICdndWFyZC1tb2RhbCc7CiAgICBtb2RhbC5zdHlsZS5jc3NUZXh0ID0gYAogIHBvc2l0aW9uOiBmaXhlZDsgCiAgdG9wOiA1MCU7IAogIGxlZnQ6IDUwJTsgCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgc2NhbGUoMC45KTsgCiAgd2lkdGg6IDEwMCU7IAogIG1heC1oZWlnaHQ6IDEwMCU7IAogIGJhY2tncm91bmQ6IHJnYigyNTMsMjUwLDI1MCk7IAogIGJvcmRlci1yYWRpdXM6IDB2dzsgCiAgei1pbmRleDogMTAwMDsgCiAgcGFkZGluZzogMnZ3OyAKICBib3gtc2l6aW5nOiBib3JkZXItYm94OyAKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOyAKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyAKICB0ZXh0LWFsaWduOiBjZW50ZXI7IAogIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyAKICBvcGFjaXR5OiAwOyAKICBwb2ludGVyLWV2ZW50czogbm9uZTsgCiAgb3ZlcmZsb3cteTogYXV0bzsKYDsKCiAgICBtb2RhbC5pbm5lckhUTUwgPSBgCjxkaXYgaWQ9ImNsb3NlTW9kYWwiIGNsYXNzPSJ0YXAiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOjIlOyByaWdodDo0JTsgY29sb3I6cmdiKDYwLDYwLDYwKTsgZm9udC1zaXplOjV2dzsgY3Vyc29yOnBvaW50ZXI7IHotaW5kZXg6MTA7Ij4KICDip4kKPC9kaXY+Cgo8ZGl2IGlkPSJyZWZyZXNoQnV0dG9uIiBjbGFzcz0idGFwIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IHRvcDo2JTsgcmlnaHQ6MyU7IGNvbG9yOnJnYig2MCw2MCw2MCk7IGZvbnQtc2l6ZTo3LjV2dzsgY3Vyc29yOnBvaW50ZXI7IHotaW5kZXg6MTA7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKTsiPgrin7IKPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxoMSBjbGFzcz0ibWFpbi10aXRsZSIgc3R5bGU9ImNvbG9yOnJnYig2MCw2MCw2MCk7Ij5BVkFUQVIgPHNwYW4gY2xhc3M9ImJsdWUtdGV4dCI+R1VBUkQ8L3NwYW4+PC9oMT4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsgd2lkdGg6NTB2dzsgaGVpZ2h0OjUwdnc7IG1hcmdpbjowIGF1dG8gMTVweDsgYm9yZGVyOjJ2dyBzb2xpZCAjMDg2NkZGO2JvcmRlci1yYWRpdXM6MTAwJTsiPgogICAgICAgICAgICA8aW1nIGlkPSJwSW1nIiBzcmM9IiR7ZmJEYXRhLnBob3RvfSIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBib3JkZXItcmFkaXVzOjEwMCU7IG9iamVjdC1maXQ6Y292ZXI7Ij4KCiAgICAgICAgICAgIDxkaXYgaWQ9ImNoZWNrU3VjY2VzcyIgY2xhc3M9ImNoZWNrLWNvbnRhaW5lciI+PHN2ZyBjbGFzcz0iY2hlY2stc3ZnIiB2aWV3Qm94PSIwIDAgNTIgNTIiPjxwYXRoIGQ9Ik0xNC4xIDI3LjJsNy4xIDcuMiAxNi43LTE2LjgiLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0icFNoaWVsZCIgY2xhc3M9InNoaWVsZC1iYWRnZSI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogNnZ3OyI+8J+boe+4jzwvc3Bhbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8aDIgaWQ9InBOYW1lIiBzdHlsZT0iY29sb3I6cmdiKDYwLDYwLDYwKTsgbWFyZ2luOjA7IGZvbnQtc2l6ZTogNnZ3O3BhZGRpbmctdG9wOjV2dztmb250LXdlaWdodDogYm9sZDsiPiR7ZmJEYXRhLm5hbWV9PC9oMj4KICAgICAgICA8cCBpZD0ibVN0YXR1cyIgc3R5bGU9InJnYigyNTMsMjUwLDI1MCk7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxdnc7IG1hcmdpbi1ib3R0b206IDN2dzsgZm9udC1zaXplOiA0dnc7Ij5Ob3RpZmljYXRpb248L3A+CiAgIDxkaXYgY2xhc3M9InNlY3Rpb24tYm94Ij4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPvCfm6HvuI8gUHJvZmlsZSBHdWFyZDwvZGl2PgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6Mi41dnc7Ij4KICAgICAgICA8YnV0dG9uIGlkPSJtT24iIGNsYXNzPSJ0YXAiIHN0eWxlPSJmbGV4OjE7IHBhZGRpbmc6Mi41dnc7IGJhY2tncm91bmQ6IzA4NjZGRjsgY29sb3I6d2hpdGU7IGJvcmRlci1yYWRpdXM6Mi41dnc7IGJvcmRlcjpub25lOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6NHZ3OyI+QWN0aXZhdGUgR3VhcmQ8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGlkPSJtT2ZmIiBjbGFzcz0idGFwIiBzdHlsZT0iZmxleDoxOyBwYWRkaW5nOjIuNXZ3OyBiYWNrZ3JvdW5kOnJnYigxMjUsMTIxLDEzMik7IGNvbG9yOndoaXRlOyBib3JkZXItcmFkaXVzOjIuNXZ3OyBib3JkZXI6bm9uZTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjR2dzsiPlR1cm4gb2ZmPC9idXR0b24+CgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo1dnc7IGNvbG9yOnJnYig5Myw5Myw5Myk7IGZvbnQtc2l6ZTozdnc7IGZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7Ij4KICAgICAgICAgIERlc2lnbjogPGI+dG9tbXl3ZWIgdjEuMDwvYj4gwqkyNwogICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAKICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1ib3giPgogICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+TW9kZSBQZW55YW1hcmFuIChUcmljayBCeXBhc3MpPC9kaXY+CiAgICAgICAgICA8c2VsZWN0IGlkPSJ1c2VyQWdlbnQiIHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogMnZ3OyBtYXJnaW4tYm90dG9tOiAzdnc7IGJvcmRlci1yYWRpdXM6IDJ2dzsgYmFja2dyb3VuZDogcmdiKDI1NSwyNTUsMjU1KTsgY29sb3I6cmdiKDEyMiwxMjIsMTIyKTsgYm9yZGVyOiAwcHggc29saWQgIzQ0NDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjR2dzsiPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlZmF1bHQiPkRlZmF1bHQgKFN0YW5kYXJkKTwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImlwaG9uZSI+aVBob25lIC8gU2FmYXJpIChNb2RlIGlPUyk8L29wdGlvbj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhbmRyb2lkX2FwcCI+RmFjZWJvb2sgQXBwIChBbmRyb2lkIE1vZGUpPC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmJfbGl0ZSI+RmFjZWJvb2sgTGl0ZSAoQnlwYXNzIE1vZGUpPC9vcHRpb24+CiAgICAgICAgICA8L3NlbGVjdD4KCiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibmlja0lucHV0IiBwbGFjZWhvbGRlcj0iTmV3IE5pY2tuYW1lLi4uIiBzdHlsZT0id2lkdGg6IDEwMCU7IHBhZGRpbmc6IDN2dzsgYm9yZGVyOiAwcHggc29saWQgIzQ0NDsgYm9yZGVyLXJhZGl1czogMnZ3OyBjb2xvcjpyZ2IoMTIyLDEyMiwxMjIpOyBjb2xvcjpyZ2IoNzEsNzEsNzEpOyBvdXRsaW5lOiBub25lOyBtYXJnaW4tYm90dG9tOiAzdnc7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogNHZ3OyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMi41dnc7Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im1OaWNrIiBjbGFzcz0idGFwIiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMi41dncgMXZ3OyBiYWNrZ3JvdW5kOiAjMDg2NkZGOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMi41dnc7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDR2dzsiPlVwZGF0ZSBOaWNrbmFtZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibVN5bmMiIGNsYXNzPSJ0YXAiIHN0eWxlPSJmbGV4OiAxOyBwYWRkaW5nOiAyLjV2dyAxdnc7IGJhY2tncm91bmQ6ICMwODY2RkY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAyLjV2dzsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogNHZ3OyI+UHJvZmlsZSBOYW1lPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKPGRpdiBzdHlsZT0id2lkdGg6IDEwMCU7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMTB2dzsgcGFkZGluZy1ib3R0b206IDV2dzsiPgogICAgPHAgc3R5bGU9ImNvbG9yOiAjODg4OyBmb250LXNpemU6IDMuMnZ3OyBtYXJnaW4tYm90dG9tOiAydnc7IHBhZGRpbmc6IDAgOHZ3OyBsaW5lLWhlaWdodDogMS40OyI+CiAgICAgICAgS2FtaSBtZW5naGFyZ2FpIHByaXZhc2kgQW5kYS4gQXBsaWthc2kgaW5pIGhhbnlhIG1lbmdha3NlcyBkYXRhIHByb2ZpbCBGYWNlYm9vayB5YW5nIGRpcGVybHVrYW4gdW50dWsgbWVuamFsYW5rYW4gZml0dXIgUHJvZmlsZSBHdWFyZCBkYW4gVXBkYXRlIE5pY2tuYW1lLiBLYW1pIHRpZGFrIG1lbnlpbXBhbiBkYXRhIHByaWJhZGkgQW5kYSBkaSBzZXJ2ZXIgZWtzdGVybmFsLgogICAgPC9wPgogICAgPGRpdiBzdHlsZT0iY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogM3Z3OyI+CiAgICAgICAgPGI+dG9tbXl3ZWJkZXZlbG9wZXIgdjEuMDwvYj4gwqkyMDI1CiAgICA8L2Rpdj4KPC9kaXY+CgogICAgYDsKCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZsb2F0QnRuKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpOwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZU1vZGFsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly90b21teWRldjI3LmdpdGh1Yi5pby90b21teS13ZWItYXBwLycsICdfYmxhbmsnKTsKICAgIH0pOwpjb25zdCBzdGF0dXMgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjbVN0YXR1cycpOwogICAgY29uc3QgcFNoaWVsZCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwU2hpZWxkJyk7CgogICAgLy8gTE9HSUtBIE9UT01BVElTOiBEZXRla3NpIFRhbWVuZyBsZWJpaCBha3VyYXQKICAgIGNvbnN0IGNoZWNrSW5pdGlhbEd1YXJkID0gKCkgPT4gewogICAgICAgIC8vIFNlbGVrdG9yIGRpcGVya3VhdCB1bnR1ayBtZW5jYXJpIHBhdGggdGFtZW5nIGJpcnUgRkIKICAgICAgICBjb25zdCBzaGllbGRQYXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigncGF0aFtkKj0iTTIwIDIyIl0sIHBhdGhbZCo9Ik0xMiAyMS4zNSJdJyk7CiAgICAgICAgY29uc3Qgc2hpZWxkQXJpYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2Z1thcmlhLWxhYmVsKj0iR3VhcmQiXSwgc3ZnW2FyaWEtbGFiZWwqPSJUYW1lbmciXScpOwogICAgICAgIAogICAgICAgIC8vIENlayBqdWdhIGFwYWthaCBhZGEgb3ZlcmxheSBwZWxpbmR1bmcgZGkgZm90byBwcm9maWwgYXNsaQogICAgICAgIGNvbnN0IHByb2ZpbGVPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9ImltZyJdIHN2ZyBmb3JlaWduT2JqZWN0ICsgc3ZnJyk7CgogICAgICAgIGlmIChzaGllbGRQYXRoIHx8IHNoaWVsZEFyaWEgfHwgcHJvZmlsZU92ZXJsYXkpIHsKICAgICAgICAgICAgcFNoaWVsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICBzdGF0dXMuc3R5bGUuY29sb3IgPSAnIzAwZDQxYSc7CiAgICAgICAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9ICJBa3RpZiAoVGVyZGV0ZWtzaSkiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEppa2EgdGlkYWsga2V0ZW11LCBjb2JhIGNhcmkgc2VrYWxpIGxhZ2kgc2V0ZWxhaCAyIGRldGlrIChhbnRpc2lwYXNpIGtvbmVrc2kgbGFtYmF0KQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5U2hpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnW2FyaWEtbGFiZWwqPSJHdWFyZCJdLCBwYXRoW2QqPSJNMjAgMjIiXScpOwogICAgICAgICAgICAgICAgaWYgKHJldHJ5U2hpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgcFNoaWVsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICAgICAgICAgIHN0YXR1cy5zdHlsZS5jb2xvciA9ICcjMDBkNDFhJzsKICAgICAgICAgICAgICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAiQWt0aWYgKFRlcmRldGVrc2kpIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfQogICAgfTsKCiAgICAvLyBQYW5nZ2lsIGZ1bmdzaQogICAgY2hlY2tJbml0aWFsR3VhcmQoKTsKCi8vIC4uLiAoU2lzYSBrb2RlIHRvbWJvbCBha3NpIGRhbiByZWZyZXNoIHRldGFwIHNhbWEpCgpjb25zdCBzZW5kTmlja25hbWUgPSAobmV3TmFtZSkgPT4gewogICAgaWYgKCFuZXdOYW1lKSByZXR1cm4gYWxlcnQoIktldGlrIG5hbWEhIik7CiAgICBjb25zdCB1aWQgPSBkb2N1bWVudC5jb29raWUubWF0Y2goL2NfdXNlcj0oXGQrKS8pPy5bMV07CiAgICBjb25zdCBkdHNnID0gKGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJmYl9kdHNnIilbMF0/LnZhbHVlKSB8fCAKICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MLm1hdGNoKC9bIidddG9rZW5bIiddXHMqOlxzKlsiJ10oW14iJ10rKVsiJ10vKT8uWzFdOwogICAgCiAgIC" + "Bjb25zdCBjb2xUb2tlbiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwubWF0Y2goL1lYQndaMk52Ykd4bFkzUnBiMjQ2W2EtekEtWjAtOSsvPV0rLyk/LlswXTsKICAgIGNvbnN0IHNlY1Rva2VuID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTC5tYXRjaCgvWVhOMlpXTjBhVzl1T1thLXpBLVowLTkrLz1dKy8pPy5bMF07CgogICAgaWYgKCFkdHNnIHx8ICF1aWQpIHJldHVybiBhbGVydCgiRGF0YSB0aWRhayBkaXRlbXVrYW4hIik7CiAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAiRGlwZXJiYXJ1aS4uLiI7CgogICAgY29uc3QgbWlkID0gTWF0aC5mbG9vcihuZXdOYW1lLmxlbmd0aCAvIDIpOwogICAgY29uc3QgcDEgPSBuZXdOYW1lLnN1YnN0cmluZygwLCBtaWQpOwogICAgY29uc3QgcDIgPSBuZXdOYW1lLnN1YnN0cmluZyhtaWQpOwogICAgCiAgICAvLyBEaWdhYnVuZ2thbiBrZW1iYWxpIHNhYXQgYWthbiBkaWtpcmltCiAgICBjb25zdCB0YXJnZXROYW1lID0gcDEgKyBwMjsKCiAgICBjb25zdCB2YXJpYWJsZXMgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgImNvbGxlY3Rpb25Ub2tlbiI6IGNvbFRva2VuIHx8ICJZWEJ3WjJOdmJHeGxZM1JwYjI0Nk5qRTFPRFkwTWpZek1Ua3lNVGc9IiwKICAgICAgICAiaW5wdXQiOiB7CiAgICAgICAgICAgICJsb2dnaW5nX2RhdGEiOiB7ICJuYXZfY2hhaW4iOiAiUHJvZmlsZUNvbWV0QWJvdXRUYWJSb290LnJlYWN0IiB9LAogICAgICAgICAgICAibmFtZV90ZXh0IjogdGFyZ2V0TmFtZSwKICAgICAgICAgICAgIm5hbWVfdHlwZSI6ICJPVEhFUiIsIAogICAgICAgICAgICAic2hvd19hc19kaXNwbGF5X25hbWUiOiB0cnVlLAogICAgICAgICAgICAiYWN0b3JfaWQiOiB1aWQsCiAgICAgICAgICAgICJjbGllbnRfbXV0YXRpb25faWQiOiAiMSIKICAgICAgICB9LAogICAgICAgICJzY2FsZSI6IDIsCiAgICAgICAgInNlY3Rpb25Ub2tlbiI6IHNlY1Rva2VuIHx8ICIiLAogICAgICAgICJ1c2VySUQiOiB1aWQKICAgIH0pOwoKICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoewogICAgICAgICdhdic6IHVpZCwgJ19fdXNlcic6IHVpZCwgJ19fYSc6ICcxJywgJ2ZiX2R0c2cnOiBkdHNnLAogICAgICAgICdmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWUnOiAnUHJvZmlsZUNvbWV0Tmlja25hbWVTYXZlTXV0YXRpb24nLAogICAgICAgICd2YXJpYWJsZXMnOiB2YXJpYWJsZXMsCiAgICAgICAgJ2RvY19pZCc6ICcyNTQwMTY0NzU4MjgzNzI5NicKICAgIH0pOwoKICAgIGZldGNoKGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2FwaS9ncmFwaHFsL2AsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiB9LAogICAgICAgIGJvZHk6IHBhcmFtcy50b1N0cmluZygpCiAgICB9KQogICAgLnRoZW4ociA9PiByLnRleHQoKSkKICAgIC50aGVuKHQgPT4gewogICAgICAgIGNvbnN0IHJlcyA9IEpTT04ucGFyc2UodC5yZXBsYWNlKCJmb3IgKDs7KTsiLCAiIikpOwogICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICBzdGF0dXMuaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPSJjb2xvcjojM2ZiOTUwIj5TZWxlc2FpITwvc3Bhbj4nOwogICAgICAgICAgICBjb25zdCBjbGVhbk5hbWUgPSBmYkRhdGEubmFtZS5yZXBsYWNlKC9ccypcKC4qP1wpL2csICIiKTsKICAgICAgICAgICAgY29uc3QgbmV3RGlzcGxheU5hbWUgPSBgJHtjbGVhbk5hbWV9ICgke3RhcmdldE5hbWV9KWA7CiAgICAgICAgICAgIAogICAgICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjcE5hbWUnKS5pbm5lclRleHQgPSBuZXdEaXNwbGF5TmFtZTsKICAgICAgICAgICAgY29uc3QgZmJIMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gxJyk7CiAgICAgICAgICAgIGlmIChmYkgxKSBmYkgxLmlubmVyVGV4dCA9IG5ld0Rpc3BsYXlOYW1lOwogICAgICAgICAgICBmYkRhdGEubmFtZSA9IG5ld0Rpc3BsYXlOYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXR1cy5pbm5lckhUTUwgPSAnPHNwYW4gc3R5bGU9ImNvbG9yOiNkMDA5MDAiPkdhZ2FsITwvc3Bhbj4nOwogICAgICAgIH0KICAgIH0pCiAgICAuY2F0Y2goKCkgPT4geyBzdGF0dXMuaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPSJjb2xvcjojZDAwOTAwIj5FcnJvciE8L3NwYW4+JzsgfSk7Cn07CmNvbnN0IHByb2Nlc3NVcGRhdGUgPSBhc3luYyAoKSA9PiB7CiAgICAvLyAxLiBWYWxpZGFzaSBMb2thc2kKICAgIGlmICghd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKCdhY2NvdW50c2NlbnRlci5mYWNlYm9vay5jb20nKSkgewogICAgICAgIGNvbnN0IHN0YXR1c01zZyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNtU3RhdHVzJyk7CiAgICAgICAgaWYgKHN0YXR1c01zZykgc3RhdHVzTXNnLmlubmVySFRNTCA9ICc8c3BhbiBzdHlsZT0iY29sb3I6cmdiKDI0MiwxOTQsMCkiPmFjY291bnRzY2VudGVyLi4uPC9zcGFuPic7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vYWNjb3VudHNjZW50ZXIuZmFjZWJvb2suY29tL3Byb2ZpbGVzLyc7IH0sIDE1MDApOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyAyLiBBbWJpbCBJbnB1dCAmIE1vZGUgZGFyaSBVSQogICAgY29uc3QgcmF3TmFtZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNuaWNrSW5wdXQnKS52YWx1ZS50cmltKCk7CiAgICBpZiAoIXJhd05hbWUpIHJldHVybiBhbGVydCgiS2V0aWsgbmFtYSBiYXJ1ISIpOwoKICAgIGNvbnN0IHNlbGVjdGVkTW9kZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyN1c2VyQWdlbnQnKS52YWx1ZTsKICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gbW9kYWwucXVlcnlTZWxlY3RvcignI21TdGF0dXMnKTsKCiAgICAvLyAzLiBQZWNhaCBOYW1hIChGaXJzdCAmIExhc3QpCiAgICBjb25zdCBuYW1lUGFydHMgPSByYXdOYW1lLnNwbGl0KCIgIik7CiAgICBjb25zdCBmTmFtZSA9IG5hbWVQYXJ0c1swXTsKICAgIGNvbnN0IGxOYW1lID0gbmFtZVBhcnRzLnNsaWNlKDEpLmpvaW4oIiAiKSB8fCAiXHUyMDBFIjsgLy8gQnlwYXNzIHRpdGlrIGRlbmdhbiBVbmljb2RlIGtvc29uZwoKICAgIGlmIChzdGF0dXNMYWJlbCkgc3RhdHVzTGFiZWwudGV4dENvbnRlbnQgPSAiTWVueXVudGlrIFByb2ZpbGUuLi4iOwoKICAgIHRyeSB7CiAgICAgICAgY29uc3QgZ2V0Q29va2llID0gKG5hbWUpID0+IHsKICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBgOyAke2RvY3VtZW50LmNvb2tpZX1gOwogICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KGA7ICR7bmFtZX09YCk7CiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0cy5wb3AoKS5zcGxpdCgnOycpLnNoaWZ0KCk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgdWlkID0gZ2V0Q29va2llKCJjX3VzZXIiKTsKICAgICAgICBjb25zdCBmYl90b2tlbiA9IChkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiZmJfZHRzZyIpWzBdPy52YWx1ZSkgfHwgCiAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MLm1hdGNoKC9bIidddG9rZW5bIiddXHMqOlxzKlsiJ10oW14iJ10rKVsiJ10vKT8uWzFdOwogICAgICAgIGNvbnN0IGphem9lc3QgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoImphem9lc3QiKVswXT8udmFsdWUpIHx8ICIiOwogICAgICAgIGNvbnN0IGxzZFRva2VuID0gKHdpbmRvdy5MU0QgJiYgd2luZG93LkxTRC50b2tlbikgfHwgCiAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MLm1hdGNoKC9bIiddTFNEWyInXVxzKixccypce1xzKlsiJ110b2tlblsiJ11ccyo6XHMqWyInXShbXiInXSspWyInXS8pPy5bMV07CgogICAgICAgIGlmICghdWlkIHx8ICFmYl90b2tlbikgdGhyb3cgbmV3IEVycm9yKCJUb2tlbi9VSUQgSGlsYW5nISIpOwoKICAgICAgICAvLyA0LiBMb2dpa2EgVXNlciBBZ2VudCAoSW50ZXJmYWNlIE1vZGUpCiAgICAgICAgbGV0IGludGVyZmFjZU1vZGUgPSAiRkJfV0VCIjsKICAgICAgICBpZiAoc2VsZWN0ZWRNb2RlID09PSAiYW5kcm9pZF9hcHAiKSBpbnRlcmZhY2VNb2RlID0gIk1FU1NFTkdFUl9MSVRFIjsKICAgICAgICBlbHNlIGlmIChzZWxlY3RlZE1vZGUgPT09ICJmYl9saXRlIikgaW50ZXJmYWNlTW9kZSA9ICJGQl9MSVRFIjsKICAgICAgICBlbHNlIGlmIChzZWxlY3RlZE1vZGUgPT09ICJpcGhvbmUiKSBpbnRlcmZhY2VNb2RlID0gIk1FU1NFTkdFUl9JT1MiOwoKICAgICAgICAvLyA1LiBCdWlsZCBWYXJpYWJsZXMgJiBQYXJhbXMKICAgICAgICBjb25zdCB2YXJpYWJsZXMgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGNsaWVudF9tdXRhdGlvbl9pZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiksCiAgICAgICAgICAgIGZhbWlseV9kZXZpY2VfaWQ6ICJkZXZpY2VfaWRfZmV0Y2hfZGF0ciIsCiAgICAgICAgICAgIGlkZW50aXR5X2lkczogW3VpZC50b1N0cmluZygpXSwKICAgICAgICAgICAgZnVsbF9uYW1lOiByYXdOYW1lLAogICAgICAgICAgICBmaXJzdF9uYW1lOiBmTmFtZSwKICAgICAgICAgICAgbWlkZGxlX25hbWU6ICIiLAogICAgICAgICAgICBsYXN0X25hbWU6IGxOYW1lLAogICAgICAgICAgICBpbnRlcmZhY2U6IGludGVyZmFjZU1vZGUKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgICAgIGF2OiB1aWQsCiAgICAgICAgICAgIF9fdXNlcjogdWlkLAogICAgICAgICAgICBfX2E6ICcxJywKICAgICAgICAgICAgZmJfZHRzZzogZmJfdG9rZW4sCiAgICAgICAgICAgIGphem9lc3Q6IGphem9lc3QsCiAgICAgICAgICAgIGZiX2FwaV9jYWxsZXJfY2xhc3M6ICJSZWxheU1vZGVybiIsCiAgICAgICAgICAgIGZiX2FwaV9yZXFfZnJpZW5kbHlfbmFtZTogInVzZUZYSU1VcGRhdGVOYW1lTXV0YXRpb24iLAogICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcywKICAgICAgICAgICAgZG9jX2lkOiAiNTc2MzUxMDg1Mzc2Mzk2MCIKICAgICAgICB9KTsKCiAgICAgICAgLy8gNi4gRWtzZWt1c2kgRmV0Y2gKICAgICAgICBmZXRjaCgiaHR0cHM6Ly9hY2NvdW50c2NlbnRlci5mYWNlYm9vay5jb20vYXBpL2dyYXBocWwvIiwgewogICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgICAgICAgICAgICAgIlgtRkItTFNEIjogbHNkVG9rZW4gfHwgIiIsCiAgICAgICAgICAgICAgICAiWC1BU0JELUlEIjogIjEyOTQ3NyIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogcGFyYW1zLnRvU3RyaW5nKCkKICAgICAgICB9KQogICAgICAgIC50aGVuKHIgPT4gci50ZXh0KCkpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGpzb25TdHIgPSBkYXRhLnN0YXJ0c1dpdGgoImZvciAoOzspOyIpID8gZGF0YS5yZXBsYWNlKCJmb3IgKDs7KTsiLCAiIikgOiBkYXRhOwogICAgICAgICAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKGpzb25TdHIpOwoKICAgICAgICAgICAgaWYgKHJlcy5kYXRhPy5meGltX3VwZGF0ZV9pZGVudGl0eV9uYW1lKSB7CiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IHJlcy5kYXRhLmZ4aW1fdXBkYXRlX2lkZW50aXR5X25hbWUuZXJyb3JfbWVzc2FnZTsKICAgICAgICAgICAgICAgIGlmICghZXJyb3JNc2cpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXNMYWJlbC5pbm5lckhUTUwgPSAnPHNwYW4gc3R5bGU9ImNvbG9yOiMwMGRmMWYiPlN1bnRpa2FuIEJlcmhhc2lsITwvc3Bhbj4nOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovL3d3dy5mYWNlYm9vay5jb20vbWUiOyB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTGFiZWwudGV4dENvbnRlbnQgPSAiRElUT0xBSzogIiArIGVycm9yTXNnLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmVycm9ycykgewogICAgICAgICAgICAgICAgc3RhdHVzTGFiZWwudGV4dENvbnRlbnQgPSAiRVJST1I6ICIgKyByZXMuZXJyb3JzWzBdLm1lc3NhZ2U7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKHN0YXR1c0xhYmVsKSBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9ICJHYWdhbDogIiArIGUubWVzc2FnZTsKICAgIH0KfTsKCiAgICBjb25zdCBzZW5kVG9nZ2xlID0gKHR5cGUpID0+IHsKICAgICAgICBjb25zdCBkdHNnID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTC5tYXRjaCgvIkRUU0dJbml0aWFsRGF0YSIsXFtdLHsidG9rZW4iOiIoLis/KSIvKTsKICAgICAgICBjb25zdCB1aWQgPSBkb2N1bWVudC5jb29raWUubWF0Y2goL2NfdXNlcj0oXGQrKS8pOwogICAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9ICJMb2FkaW5nLi4uIjsKICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7IHR5cGU6ICdUT0dHTEVfR1VBUkQnLCB1c2VySWQ6IHVpZCA/IHVpZFsxXSA6IG51bGwsIGZiRHRzZzogZHRzZyA/IGR0c2dbMV0gOiBudWxsLCB0b2dnbGU6IHR5cGUgfSwgKHJlcykgPT4gewogICAgICAgICAgICBpZiAocmVzICYmICFyZXMuZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignI2NoZWNrU3VjY2VzcycpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgICAgICAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLmNoZWNrLXN2ZyBwYXRoJykuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS1jaGVjaycpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyAKICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignI2NoZWNrU3VjY2VzcycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IAogICAgICAgICAgICAgICAgICAgICAgICBwU2hpZWxkLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuc3R5bGUuY29sb3IgPSAnIzAwZDQxYSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9ICJBa3RpZiEiOyAKICAgICAgICAgICAgICAgICAgICB9LCAxMjAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcFNoaWVsZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIHN0YXR1cy5zdHlsZS5jb2xvciA9ICcjNzc3Nzc3JzsKICAgICAgICAgICAgICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAiT2ZmISI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07CgovLyAtLS0gQmFnaWFuIHRvbWJvbCBha3NpIC0tLQogICAgbW9kYWwucXVlcnlTZWxlY3RvcignI21PbicpLm9uY2xpY2sgPSAoKSA9PiBzZW5kVG9nZ2xlKHRydWUpOwogICAgbW9kYWwucXVlcnlTZWxlY3RvcignI21PZmYnKS5vbmNsaWNrID0gKCkgPT4gc2VuZFRvZ2dsZShmYWxzZSk7CiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjbU5pY2snKS5vbmNsaWNrID0gKCkgPT4gc2VuZE5pY2tuYW1lKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNuaWNrSW5wdXQnKS52YWx1ZSk7CiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjbVN5bmMnKS5vbmNsaWNrID0gKCkgPT4gcHJvY2Vzc1VwZGF0ZSgpOwoKLy8gLS0tIExvZ2lrYSBSZWZyZXNoIChGb3RvICYgTmFtYSkgLS0tCiAgICBjb25zdCByZWZyZXNoQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignI3JlZnJlc2hCdXR0b24nKTsKICAgIGNvbnN0IHByb2ZpbGVJbWcgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcjcEltZycpOwogICAgY29uc3Qgc3RhdHVzTXNnID0gbW9kYWwucXVlcnlTZWxlY3RvcignI21TdGF0dXMnKTsKCiAgICBpZiAocmVmcmVzaEJ0bikgewogICAgICAgIGxldCByZXRyeUNvdW50ID0gMDsKCiAgICAgICAgcmVmcmVzaEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBwcm9maWxlTmFtZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNwTmFtZScpOwogICAgICAgICAgICBjb25zdCB1aWQgPSBkb2N1bWVudC5jb29raWUubWF0Y2goL2NfdXNlcj0oXGQrKS8pPy5bMV07CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAodWlkKSB7CiAgICAgICAgICAgICAgICBzdGF0dXNNc2cuaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPSJjb2xvcjpyZ2IoMjEzLDE3MSwwKSI+TWVueWlua3Jvbmthbi4uLjwvc3Bhbj4nOwoKICAgICAgICAgICAgICAgIC8vIDEuIFNpbmtyb25rYW4gRm90bwogICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSAiNjYyODU2ODM3OSU3Q2MxZTYyMGZhNzA4YTFkNTY5NmZiOTkxYzFiZGU1NjYyIjsKICAgICAgICAgICAgICAgIGNvbnN0IHNlY3VyZVBob3RvVXJsID0gYGh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyR7dWlkfS9waWN0dXJlP3R5cGU9bGFyZ2Umd2lkdGg9NTAwJmhlaWdodD01MDAmYWNjZXNzX3Rva2VuPSR7dG9rZW59YDsKICAgICAgICAgICAgICAgIHByb2ZpbGVJbWcuc3JjID0gc2VjdXJlUGhvdG9VcmwgKyAnJnQ9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgICAgICAgICAgIC8vIDIuIFNpbmtyb25rYW4gTmFtYQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8ke3VpZH0/ZmllbGRzPW5hbWUmYWNjZXNzX3Rva2VuPSR7dG9rZW59YCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5uYW1lICYmIHByb2ZpbGVOYW1lKSBwcm9maWxlTmFtZS5pbm5lclRleHQgPSBkYXRhLm5hbWU7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkdhZ2FsIHNpbmtyb24gbmFtYS4iKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdGF0dXNNc2cuaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPSJjb2xvcjojMDBkZjFmIj5EYXRhIEFrdW4gU2lua3JvbiE8L3NwYW4+JzsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBzdGF0dXNNc2cudGV4dENvbnRlbnQgPSAiTm90aWZpY2F0aW9uIjsgfSwgMTUwMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdGF0dXNNc2cuaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPSJjb2xvcjpyZ2IoMjQ1LDExLDApIj5HYWdhbDogVUlEIHRpZGFrIGRpdGVtdWthbjwvc3Bhbj4nOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLy8gT1RPTUFUSVM6IE11bmN1bGthbiBnYW1iYXIgc2FhdCBzdGFydAogICAgICAgIHJlZnJlc2hCdG4uY2xpY2soKTsKCiAgICAgICAgLy8gUkVGUkVTSCBPVE9NQVRJUzogSGFueWEgamlrYSBnYW1iYXIgZ2FnYWwgbXVuY3VsIChFcnJvcikKICAgICAgICBwcm9maWxlSW1nLm9uZXJyb3IgPSAoKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgMikgewogICAgICAgICAgICAgICAgcmV0cnlDb3VudCsrOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZvdG8gdGlkYWsgbXVuY3VsLCBtZS1yZWZyZXNoIG90b21hdGlzLi4uIik7CiAgICAgICAgICAgICAgICByZWZyZXNoQnRuLmNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIC8vIC0tLSBUb21ib2wgTWVuZ2FtYmFuZyAtLS0KICAgIGZsb2F0QnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgY29uc3QgaXNGdWxsID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7CiAgICAgICAgaWYgKCFpc0Z1bGwpIHsKICAgICAgICAgICAgbGV0IGRvY3MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgICAgIGlmIChkb2NzLnJlcXVlc3RGdWxsc2NyZWVuKSBkb2NzLnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIGVsc2UgaWYgKGRvY3Mud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIGRvY3Mud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG1vZGFsLnN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICAgICAgICAgIG1vZGFsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7CiAgICAgICAgICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSkgc2NhbGUoMSknOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBtb2RhbC5zdHlsZS5vcGFjaXR5ID0gJzAnOwogICAgICAgICAgICBtb2RhbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgICAgICBtb2RhbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDAuOSknOwogICAgICAgIH0KICAgIH07Cn07IC8vIFBlbnV0dXAgaW5qZWN0VUkKCmluamVjdFVJKCk7CiAg"))));
